<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>JdBucketItemRef.ts - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow-eighties.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
    <link type="text/css" rel="stylesheet" href="styles/style.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="JdBucketContainerRef.html">JdBucketContainerRef</a><ul class='methods'><li data-type='method'><a href="JdBucketContainerRef.html#addDragItem">addDragItem</a></li><li data-type='method'><a href="JdBucketContainerRef.html#addDragItemToBoundary">addDragItemToBoundary</a></li><li data-type='method'><a href="JdBucketContainerRef.html#createCloneModel">createCloneModel</a></li><li data-type='method'><a href="JdBucketContainerRef.html#destroy">destroy</a></li><li data-type='method'><a href="JdBucketContainerRef.html#dispatchChangeState">dispatchChangeState</a></li><li data-type='method'><a href="JdBucketContainerRef.html#dispatchDropped">dispatchDropped</a></li><li data-type='method'><a href="JdBucketContainerRef.html#findDragItemIndex">findDragItemIndex</a></li><li data-type='method'><a href="JdBucketContainerRef.html#findItemRefByElement">findItemRefByElement</a></li><li data-type='method'><a href="JdBucketContainerRef.html#findItemRefIndex">findItemRefIndex</a></li><li data-type='method'><a href="JdBucketContainerRef.html#flushDragItem">flushDragItem</a></li><li data-type='method'><a href="JdBucketContainerRef.html#getDragItems">getDragItems</a></li><li data-type='method'><a href="JdBucketContainerRef.html#getItemRefs">getItemRefs</a></li><li data-type='method'><a href="JdBucketContainerRef.html#getList">getList</a></li><li data-type='method'><a href="JdBucketContainerRef.html#getMergeCurrentList">getMergeCurrentList</a></li><li data-type='method'><a href="JdBucketContainerRef.html#getMergeInsertList">getMergeInsertList</a></li><li data-type='method'><a href="JdBucketContainerRef.html#getUid">getUid</a></li><li data-type='method'><a href="JdBucketContainerRef.html#isGroupInsertable">isGroupInsertable</a></li><li data-type='method'><a href="JdBucketContainerRef.html#isGroupSame">isGroupSame</a></li><li data-type='method'><a href="JdBucketContainerRef.html#joinItemRef">joinItemRef</a></li><li data-type='method'><a href="JdBucketContainerRef.html#mergeToDrop">mergeToDrop</a></li><li data-type='method'><a href="JdBucketContainerRef.html#observeChangeState">observeChangeState</a></li><li data-type='method'><a href="JdBucketContainerRef.html#observeDropped">observeDropped</a></li><li data-type='method'><a href="JdBucketContainerRef.html#removeByIndex">removeByIndex</a></li><li data-type='method'><a href="JdBucketContainerRef.html#removeByModel">removeByModel</a></li><li data-type='method'><a href="JdBucketContainerRef.html#removeDragItem">removeDragItem</a></li><li data-type='method'><a href="JdBucketContainerRef.html#setDragItem">setDragItem</a></li><li data-type='method'><a href="JdBucketContainerRef.html#setDropBefore">setDropBefore</a></li><li data-type='method'><a href="JdBucketContainerRef.html#setElContainer">setElContainer</a></li><li data-type='method'><a href="JdBucketContainerRef.html#setGroupName">setGroupName</a></li><li data-type='method'><a href="JdBucketContainerRef.html#setLazyStateChangeDelay">setLazyStateChangeDelay</a></li><li data-type='method'><a href="JdBucketContainerRef.html#setList">setList</a></li><li data-type='method'><a href="JdBucketContainerRef.html#setMax">setMax</a></li><li data-type='method'><a href="JdBucketContainerRef.html#setMultiple">setMultiple</a></li><li data-type='method'><a href="JdBucketContainerRef.html#setReceiver">setReceiver</a></li><li data-type='method'><a href="JdBucketContainerRef.html#unjoinItemRef">unjoinItemRef</a></li></ul></li><li><a href="JdBucketItemRef.html">JdBucketItemRef</a><ul class='methods'><li data-type='method'><a href="JdBucketItemRef.html#destroy">destroy</a></li><li data-type='method'><a href="JdBucketItemRef.html#dispatchChangeState">dispatchChangeState</a></li><li data-type='method'><a href="JdBucketItemRef.html#getElBound">getElBound</a></li><li data-type='method'><a href="JdBucketItemRef.html#getUid">getUid</a></li><li data-type='method'><a href="JdBucketItemRef.html#observeChangeState">observeChangeState</a></li><li data-type='method'><a href="JdBucketItemRef.html#setElContainer">setElContainer</a></li><li data-type='method'><a href="JdBucketItemRef.html#setModel">setModel</a></li><li data-type='method'><a href="JdBucketItemRef.html#setSelected">setSelected</a></li></ul></li><li><a href="JdBucketRef.html">JdBucketRef</a><ul class='methods'><li data-type='method'><a href="JdBucketRef.html#dispatchDragChoose">dispatchDragChoose</a></li><li data-type='method'><a href="JdBucketRef.html#dispatchDragEnd">dispatchDragEnd</a></li><li data-type='method'><a href="JdBucketRef.html#dispatchDragStart">dispatchDragStart</a></li><li data-type='method'><a href="JdBucketRef.html#dispatchDragUnchoose">dispatchDragUnchoose</a></li><li data-type='method'><a href="JdBucketRef.html#dispatchRangeSelectionStart">dispatchRangeSelectionStart</a></li><li data-type='method'><a href="JdBucketRef.html#findContainerRefByElement">findContainerRefByElement</a></li><li data-type='method'><a href="JdBucketRef.html#joinContainerRef">joinContainerRef</a></li><li data-type='method'><a href="JdBucketRef.html#observeDragger">observeDragger</a></li><li data-type='method'><a href="JdBucketRef.html#observeRangeSelection">observeRangeSelection</a></li><li data-type='method'><a href="JdBucketRef.html#setFallbackIndicate">setFallbackIndicate</a></li><li data-type='method'><a href="JdBucketRef.html#unjoinContainerRef">unjoinContainerRef</a></li></ul></li></ul><h3>Interfaces</h3><ul><li><a href="BucketCloneModel.html">BucketCloneModel</a></li><li><a href="BucketDragChoose.html">BucketDragChoose</a></li><li><a href="BucketDragDrop.html">BucketDragDrop</a></li><li><a href="BucketDragEnd.html">BucketDragEnd</a></li><li><a href="BucketDragSelectionState.html">BucketDragSelectionState</a></li><li><a href="BucketDragStart.html">BucketDragStart</a></li><li><a href="BucketEvent.html">BucketEvent</a></li><li><a href="BucketRangeSelectionEvent.html">BucketRangeSelectionEvent</a></li><li><a href="BucketRangeSelectionState.html">BucketRangeSelectionState</a></li><li><a href="BucketSortableEvent.html">BucketSortableEvent</a></li><li><a href="IBucketContainerRef.html">IBucketContainerRef</a></li><li><a href="IBucketItemRef.html">IBucketItemRef</a></li><li><a href="IBucketRef.html">IBucketRef</a></li><li><a href="SelectionBound.html">SelectionBound</a></li><li><a href="SelectionBoundary.html">SelectionBoundary</a></li></ul><h3>Global</h3><ul><li><a href="global.html#BucketEventType">BucketEventType</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">JdBucketItemRef.ts</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { Subject, Observable } from 'rxjs';
import { IBucketItemRef } from './types';
import { createUid } from '../../utils';

/**
 * 한개의 버킷 아이템
 * @export
 * @class JdBucketItemRef
 * @implements {IBucketItemRef}
 */
export class JdBucketItemRef&lt;TM = any> implements IBucketItemRef&lt;TM> {
  constructor() {
    this.uid = createUid();
  }

  protected uid: string = '';
  protected elDragContainer: Element | null = null;
  protected dataModel: TM | null = null;
  protected selected: boolean = false;
  protected subjectChangeState: Subject&lt;any> = new Subject();

  /**
   * 해당 아이템에 등록된 모델
   * @readonly
   */
  get model(): TM | null {
    return this.dataModel;
  }

  /**
   * 아이템의 (드래깅)선택 여부
   * @readonly
   */
  get isSelected() {
    return this.selected;
  }

  /**
   * draggable 에서 사용되는 DOM
   * (draggable 의 이벤트 등에서 DOM 을 clone 하거나 target DOM 등 으로 사용됨)
   * @readonly
   * @type {(Element | null)}
   */
  get elContainer(): Element | null {
    return this.elDragContainer;
  }

  /**
   * 해당 아이템과 연결할 모델.
   * @param {TM} model
   */
  setModel(model: TM) {
    this.dataModel = model;
  }

  /**
   * draggable DOM 참조 지정.
   * @param {Element} element
   */
  setElContainer(element: Element) {
    this.elDragContainer = element;
  }

  /**
   * 해당 아이템의 선택(드래깅) 상태 지정.
   * @param {boolean} is
   */
  setSelected(is: boolean) {
    this.selected = !!is;
    this.dispatchChangeState();
  }

  /**
   * 해당 아이템의 uid 반환
   * @returns {string}
   */
  getUid(): string {
    return this.uid;
  }

  /**
   * 해당 아이템의 DOM 의 bound 영역.
   * @returns {(ClientRect | DOMRect | null)}
   */
  getElBound(): ClientRect | DOMRect | null {
    if (!this.elContainer) return null;
    return (this.elContainer as HTMLElement).getBoundingClientRect();
  }

  /**
   * 옵저버: 아이템 상태.
   * @returns {Observable&lt;any>}
   */
  observeChangeState(): Observable&lt;any> {
    return this.subjectChangeState.asObservable();
  }

  /**
   * 알림: 아이템 상태 변경.
   */
  dispatchChangeState(): void {
    this.subjectChangeState.next();
  }

  /**
   * 파기
   *
   */
  destroy() {
    try {
      if (this.subjectChangeState) {
        this.subjectChangeState.unsubscribe();
      }
      // ...
    } catch (err) {
      console.error(err);
    }
  }
}
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated at Tue Jul 14 2020 01:25:34 GMT+0000 (Coordinated Universal Time)
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
